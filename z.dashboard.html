<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SkillFi | Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="relative min-h-screen text-gray-100 overflow-x-hidden">

  <!-- Background -->
  <div class="absolute inset-0 bg-[linear-gradient(135deg,hsla(0,0%,0%,1)_0%,hsla(240,72%,6%,1)_1%,hsla(243,78%,11%,1)_100%)]"></div>
  <div class="absolute inset-0 bg-black/30"></div>

  <!-- Header / Navigation Bar -->
    <header class="flex items-center justify-between px-8 py-4 bg-white/0 backdrop-blur-md shadow-sm">
      <div>
        <img src="https://image2url.com/images/1760087403658-2a78793e-55ea-4d22-80bf-f49a687cd2c8.png" class="w-25 h-10" />
      </div>

      <nav class="hidden md:flex space-x-8 text-lg font-medium text-white ml-auto">
        <a href="z.about_us.html" class="hover:text-blue-400">&lt;About Us&gt;</a> <!--about us added-->
        <a href="services.html" class="hover:text-blue-400">&lt;Services&gt;</a>
        <a href="contact_us.html" class="hover:text-blue-400">&lt;Contact Us&gt;</a> <!--contact us added-->
        <a href="loginpage.html" class="hover:text-blue-400">&lt;Sign Up&gt;</a><p>       </p>
      </nav>
      
      <div class="flex items-center">
        <div 
          class="bg-blue-600 hover:bg-blue-500 text-white w-10 h-10 flex items-center justify-center rounded-full cursor-pointer shadow-lg transition"
          onclick="toggleSidebar()">
          <i class="fa-solid fa-user text-xl"></i>
        </div>
      </div>
    </header>

  <!-- Main Dashboard Content -->
  <main class="relative z-10 px-8 py-10 max-w-7xl mx-auto">
    <!-- Profile Section -->
    <div class="flex flex-col items-center space-y-4 mb-12">
      <img id="profileImage" src="https://static.vecteezy.com/system/resources/previews/018/742/015/original/minimal-profile-account-symbol-user-interface-theme-3d-icon-rendering-illustration-isolated-in-transparent-background-png.png" class="w-32 h-32 rounded-full border-4 border-blue-500 shadow-lg object-cover" />
      <h2 class="text-3xl font-semibold">Jhanvi Gupta</h2>
    </div>

<!-- Graph Section -->
<!-- Dashboard Inputs + Profile -->
<div class="flex items-center justify-between flex-wrap px-6 py-6 gap-4 text-white w-full">
  <!-- Profile Image with modal functionality -->
  <div class="flex-shrink-0 relative">
    <img id="profileImage" src="https://static.vecteezy.com/system/resources/previews/018/742/015/original/minimal-profile-account-symbol-user-interface-theme-3d-icon-rendering-illustration-isolated-in-transparent-background-png.png"
         alt="User"
         class="w-24 h-24 rounded-full border-4 border-blue-500 shadow-lg object-cover cursor-pointer"
         onclick="showProfileOptions()">

    <!-- Profile Option Modal -->
    <div id="profileOptions" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50">
      <div class="bg-slate-800 p-6 rounded-2xl text-center w-80 shadow-2xl border border-slate-600">
        <h2 class="text-xl font-semibold mb-4">Choose an option</h2>
        <div class="space-y-3">
          <button onclick="openCamera()" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg">üì∏ Use Camera</button>
          <button onclick="uploadFromPhotos()" class="w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg">üñºÔ∏è Upload from Photos</button>
          <button onclick="removePhoto()" class="w-full px-4 py-2 bg-red-500 hover:bg-red-400 rounded-lg">‚ùå Remove Photo</button>
          <button onclick="closeProfileOptions()" class="w-full px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg">Cancel</button>
        </div>
      </div>
    </div>
    <!-- Hidden file input -->
    <input type="file" id="photoUpload" accept="image/*" class="hidden" onchange="handlePhotoUpload(event)">
  </div>

  <!-- User Inputs (full width spread) -->
  <div class="flex flex-1 gap-4 flex-wrap items-center">
    <input id="userName" type="text" placeholder="Enter Name" class="px-4 py-2 rounded-md text-black flex-1 min-w-[200px]">
    <input id="userSkills" type="text" placeholder="Enter Skills (comma separated)" class="px-4 py-2 rounded-md text-black flex-1 min-w-[300px]">
    <button onclick="showUserInfo()" class="px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition self-end ml-auto">Save</button>
  </div>
</div>

<!-- Graph Section -->
<div class="flex justify-center flex-wrap gap-6 px-6 py-6 w-full">
  <div class="flex flex-col items-center chart-container flex-1 min-w-[180px]">
    <h3 class="text-base font-semibold mb-2 text-blue-400 text-center">Technical Knowledge</h3>
    <canvas id="techChart" width="180" height="180"></canvas>
  </div>
  <div class="flex flex-col items-center chart-container flex-1 min-w-[180px]">
    <h3 class="text-base font-semibold mb-2 text-blue-400 text-center">Communication</h3>
    <canvas id="commChart" width="180" height="180"></canvas>
  </div>
  <div class="flex flex-col items-center chart-container flex-1 min-w-[180px]">
    <h3 class="text-base font-semibold mb-2 text-blue-400 text-center">Confidence</h3>
    <canvas id="confChart" width="180" height="180"></canvas>
  </div>
  <div class="flex flex-col items-center chart-container flex-1 min-w-[180px]">
    <h3 class="text-base font-semibold mb-2 text-blue-400 text-center">Creativity</h3>
    <canvas id="creativityChart" width="180" height="180"></canvas>
  </div>
</div>

<!-- Sidebar (Same as Landing Page) -->
  <div id="sidebar" class="fixed top-0 right-0 h-full w-0 overflow-hidden bg-slate-900/95 shadow-xl transition-all duration-500 ease-in-out z-20 text-white">
    <div class="p-6 flex flex-col h-full">
      <button class="self-end text-3xl hover:text-blue-400 transition" onclick="toggleSidebar()">&times;</button>
      <div class="mt-6 space-y-6 text-lg flex-1">
        <h3 class="text-2xl font-semibold border-b border-slate-700 pb-3">Hi, Jhanvi üëã</h3>
        <!---edit profile page link--><a href="edit_profile.html" class="flex items-center gap-3 hover:text-blue-400 transition"><i class="fa-solid fa-pen"></i> Edit Profile</a>
        <!---my skills page link--><a href="my_skills.html" class="flex items-center gap-3 hover:text-blue-400 transition"><i class="fa-solid fa-lightbulb"></i> My Skills</a>
        <!---my badges page link--><a href="my_badges.html" class="flex items-center gap-3 hover:text-blue-400 transition"><i class="fa-solid fa-medal"></i> My Badges</a>
        <button onclick="openNotifications()" class="flex items-center gap-3 hover:text-blue-400 transition w-full text-left"><i class="fa-solid fa-bell"></i> Notification Preferences</button>
        <button onclick="logout()" class="flex items-center gap-3 text-red-400 hover:text-red-500 transition w-full text-left"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
      </div>
      <div class="border-t border-slate-700 pt-5 mt-5">
        <button onclick="openHelp()" class="flex items-center gap-3 text-blue-400 hover:text-blue-300 transition w-full text-left"><i class="fa-solid fa-circle-question"></i> Help & Support</button>
      </div>
    </div>
  </div>
<script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.style.width = sidebar.style.width === '300px' ? '0' : '300px';
    }
    function openNotifications() {
      alert("Redirecting to Notification Preferences...");
      window.location.href = "notifications.html";
    }
    function logout() {
      alert("You have been logged out.");
      window.location.href = "loginpage.html";
    }
    function openHelp() {
      alert("Redirecting to Help & Support...");
      window.location.href = "help&support.html";
    }
  </script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

<script>
let userScores = { technical: 85, communication: 75, confidence: 90, creativity: 80 };
const defaultImage = "https://static.vecteezy.com/system/resources/previews/018/742/015/original/minimal-profile-account-symbol-user-interface-theme-3d-icon-rendering-illustration-isolated-in-transparent-background-png.png";

// Profile image functions
const profileImage = document.getElementById('profileImage');
const profileOptions = document.getElementById('profileOptions');
const photoUpload = document.getElementById('photoUpload');
let stream;

function showProfileOptions(){ profileOptions.classList.remove('hidden'); }
function closeProfileOptions(){ profileOptions.classList.add('hidden'); }
function uploadFromPhotos(){ closeProfileOptions(); photoUpload.click(); }
function removePhoto(){ updateProfilePhoto(defaultImage); closeProfileOptions(); }

async function openCamera(){
  closeProfileOptions();
  try {
    stream = await navigator.mediaDevices.getUserMedia({ video: true });
    const cameraContainer = document.createElement('div');
    cameraContainer.className = "fixed inset-0 bg-black/70 flex flex-col items-center justify-center z-50 space-y-4";
    cameraContainer.innerHTML = `
      <video id="cameraFeed" autoplay class="w-80 h-64 rounded-lg shadow-lg"></video>
      <div class="flex gap-3">
        <button id="capture" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg">Capture</button>
        <button id="closeCam" class="px-4 py-2 bg-red-600 hover:bg-red-500 rounded-lg">Cancel</button>
      </div>
    `;
    document.body.appendChild(cameraContainer);
    document.getElementById('cameraFeed').srcObject = stream;

    document.getElementById('capture').onclick = () => capturePhotoFromModal(cameraContainer);
    document.getElementById('closeCam').onclick = () => closeCamera(cameraContainer);
  } catch { alert("Camera access denied!"); }
}

function capturePhotoFromModal(modal){
  const video = modal.querySelector('#cameraFeed');
  const canvas = document.createElement('canvas');
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  canvas.getContext('2d').drawImage(video, 0, 0);
  const imageData = canvas.toDataURL('image/png');
  updateProfilePhoto(imageData);
  closeCamera(modal);
}

function closeCamera(modal){ if(stream) stream.getTracks().forEach(track=>track.stop()); modal.remove(); }
function handlePhotoUpload(event){ const file = event.target.files[0]; if(file){ const reader = new FileReader(); reader.onload=e=>updateProfilePhoto(e.target.result); reader.readAsDataURL(file); } }
function updateProfilePhoto(imageData){ profileImage.src = imageData; }

// Save user info
function showUserInfo(){
  const name = document.getElementById('userName').value || 'Anonymous';
  const skills = document.getElementById('userSkills').value || '';
  console.log({name, skills});
}

// Chart functions
function getGradientColor(score){ if(score>=85) return '#60a5fa'; if(score>=70) return '#3b82f6'; return '#1e40af'; }
function renderChart(canvasId, score){
  const ctx = document.getElementById(canvasId).getContext('2d');
  
  // destroy existing chart if any
  if(ctx.chart) ctx.chart.destroy();

  ctx.chart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Score','Remaining'],
      datasets: [{
        data: [score, 100 - score],
        backgroundColor: [getGradientColor(score), '#1e293b'],
        borderWidth: 2,
        borderColor: '#1e293b'
      }]
    },
    options: {
      responsive: false,
      maintainAspectRatio: false,
      cutout: '70%',
      plugins: {
        legend: { display: false },
        tooltip: { enabled: false },
        datalabels: { display: false }
      },
      animation: {
        animateRotate: true,
        duration: 1000
      }
    },
    plugins: [ChartDataLabels]
  });
}


// Initial render
['techChart','commChart','confChart','creativityChart'].forEach(id=>renderChart(id,userScores[id.replace('Chart','').toLowerCase()]||0));

// Hover effect for charts
document.querySelectorAll('.chart-container canvas').forEach(canvas=>{
  canvas.addEventListener('mouseenter',()=>{ canvas.style.transform='scale(1.05)'; canvas.style.transition='transform 0.3s'; });
  canvas.addEventListener('mouseleave',()=>{ canvas.style.transform='scale(1)'; });
});
</script>


</body>
</html>
